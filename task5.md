Демо-проект "Фермерские продукты": перенос из CodeSandbox в Git-репозиторий

Сначала решим проблему с подключением файлов. Сейчас в проекте файлы подключены по прямому пути, например, /src/components/app/app. Это работает только тогда, когда проект находится в корне файловой системы, как в CodeSandbox. Но если развернуть проект локально, не в корне, то всё сломается, так как перед /src/components/app/app должен идти путь до директории с проектом, иначе файл не будет найден. Очевидно, ограничение на развёртывание проекта только в корне файловой системы является неприемлемым. Использование относительных путей вместо полных также неудобно, поскольку ухудшает читабельность кода.

Решение состоит в настройке webpack таким образом, чтобы часть URL /src в конструкции import превращалась в «путь до директории с проектом + src». Логика «путь до директории с проектом + src» в nodejs соответствует вызову path.resolve(\_\_dirname, "src"). Такие правила можно описывать в секции resolve внутри webpack.config. Но шаблон React-приложения в CodeSandbox основан на CRA, и конфигурация webpack недоступна для редактирования, поэтому воспользуемся customize-cra, чтобы переопределить часть этой конфигурации.

Добавим в зависимости проекта в CodeSandbox пакеты react-app-rewired и customize-cra. Теперь в файле package.json в секции scripts для команд start и build заменим вызов react-scripts на react-app-rewired.

В результате код команд будет выглядеть так:
"start": "react-app-rewired start",
"build": "react-app-rewired build",

    Теперь в корне проекта создадим файл config-overrides.js, в котором и переопределим часть дефолтной конфигурации webpack.

Для этого нам понадобятся методы override и addWebpackAlias из пакета customize-cra.

Функция override переопределяет часть дефолтной конфигурации на основе переданного в него значения.

Функция addWebpackAlias позволяет сгенерировать значение, которое нужно передать в override, чтобы изменить секцию resolve в настройках webpack.

Таким образом, чтобы добавить нужный алиас для «/src» в config-overrides.js, нужно указать:
const { override, addWebpackAlias } = require("customize-cra");

const path = require("path");

module.exports = override(
addWebpackAlias({
"/src": path.resolve(\_\_dirname, "src")
})
);

После замены react-scripts на react-app-rewired может понадобиться добавить дополнительные зависимости.

В частности, сейчас перестал корректно работать Swiper из-за отсутствия пакета для SASS. Добавим SASS в зависимости проекта, чтобы восстановить работоспособность. Теперь для import начало пути /src всегда будет трансформировано в path.resolve (\_\_dirname, «src»), и приложение будет собрано корректно вне зависимости от того, в какой части файловой системы оно размещено.

Также в public/index.html заменим <title>React App</title> на <title>Фермерские продукты</title>, чтобы в табах браузера отображалось правильное название.

Переместим приложение из CodeSandbox в репозиторий на GitHub. Предварительно авторизуйтесь на сайте GitHub, используя свою учётную запись.

Нажмите иконку GitHub в левом меню окна проекта:

В результате откроется панель, где нужно указать название репозитория, который будет создан в GitHub для нашего проекта.

Назовём его {FarmersProducts}:
